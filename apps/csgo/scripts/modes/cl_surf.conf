#! /bin/bash

# CampusLAN surf config


SLOTS=12
TICKRATE=64

GAMETYPE=0
GAMEMODE=0

MAPS="surf_mesa surf_kitsune surf_fruits surf_utopia_njv surf_beginner"




cat <<-EOF > "$INSTANCE_DIR/csgo/cfg/gamemode_casual_server.cfg"
	// CampusLAN surf config
	mp_timelimit 30
	mp_roundtime 30
	mp_maxplayers 12
	mp_limitteams 10
	bot_quota 0
EOF



######################## ENABLE/DISABLE SOURCEMOD PLUGINS ###########################
# Requires variable SOURCEMOD_PLUGINS to be set
SOURCEMOD_PLUGINS="
	admin-flatfile adminhelp adminmenu basebans basecommands
	clientprefs mapchooser rockthevote ckSurf
"

(
	# Step 1: disable all addons
	cd "$INSTANCE_DIR/csgo/addons/sourcemod/plugins"
	for f in *.smx; do
		mv $f disabled/$f
	done

	# Step 2: re-enable those that we use
	for f in $SOURCEMOD_PLUGINS; do
		mv disabled/$f.smx $f.smx 2>/dev/null
	done
)
